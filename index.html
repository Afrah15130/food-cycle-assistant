<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshScan - AI Food Analysis System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 50%, #2dd4bf 100%);
            min-height: 100vh;
            padding: 0;
        }

        .page {
            display: none;
            min-height: 100vh;
        }

        .page.active {
            display: flex;
        }

        /* Login Page */
        .login-page {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        .login-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            overflow: hidden;
            max-width: 1100px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 600px;
        }

        .login-left {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            padding: 60px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .login-left h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
        }

        .login-left .subtitle {
            font-size: 1.15em;
            opacity: 0.95;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .feature-list {
            list-style: none;
            margin-top: 20px;
        }

        .feature-list li {
            padding: 15px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.05em;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list li::before {
            content: "‚úì";
            background: rgba(255,255,255,0.25);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .login-right {
            padding: 60px 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .login-header {
            margin-bottom: 35px;
        }

        .login-header h2 {
            color: #0f766e;
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .login-header p {
            color: #64748b;
            font-size: 1em;
        }

        .form-group {
            margin-bottom: 22px;
        }

        .form-group label {
            display: block;
            color: #334155;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 0.95em;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
            background: #f8fafc;
        }

        .form-group input:focus {
            outline: none;
            border-color: #14b8a6;
            background: white;
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 10px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(20, 184, 166, 0.4);
        }

        .btn-secondary {
            background: #64748b;
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
        }

        .auth-footer {
            text-align: center;
            margin-top: 25px;
            color: #64748b;
            font-size: 0.95em;
        }

        .auth-footer a {
            color: #0f766e;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Register Page */
        .register-container {
            max-width: 550px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            padding: 50px;
        }

        /* Main App */
        .main-app {
            width: 100%;
            background: #f1f5f9;
        }

        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .navbar-brand .logo {
            font-size: 1.8em;
        }

        .navbar-brand .brand-text h1 {
            font-size: 1.5em;
            font-weight: 700;
            color: #0f766e;
            line-height: 1.2;
        }

        .navbar-brand .brand-text p {
            font-size: 0.8em;
            color: #64748b;
            margin-top: 2px;
        }

        .navbar-right {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: #f0fdfa;
            border-radius: 25px;
            color: #0f766e;
            font-weight: 600;
        }

        .btn-small {
            padding: 10px 24px;
            font-size: 0.95em;
            width: auto;
        }

        .mode-toggle {
            display: flex;
            gap: 10px;
            background: #f0fdfa;
            padding: 5px;
            border-radius: 25px;
        }

        .mode-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: #0f766e;
            font-weight: 600;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(20, 184, 166, 0.3);
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }

        .content-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .content-header h1 {
            color: #0f172a;
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .content-header p {
            color: #64748b;
            font-size: 1.2em;
        }

        .mode-section {
            display: none;
        }

        .mode-section.active {
            display: block;
        }

        .food-selector {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .food-selector h2 {
            color: #0f172a;
            font-size: 1.8em;
            margin-bottom: 25px;
            text-align: center;
        }

        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .food-item {
            background: #f8fafc;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .food-item:hover {
            transform: translateY(-5px);
            border-color: #14b8a6;
            box-shadow: 0 8px 20px rgba(20, 184, 166, 0.2);
        }

        .food-item.selected {
            border-color: #0f766e;
            background: #ccfbf1;
        }

        .food-item .emoji {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .food-item .name {
            font-weight: 600;
            color: #0f172a;
            font-size: 1.1em;
        }

        .food-item .type {
            font-size: 0.85em;
            color: #64748b;
            margin-top: 5px;
        }

        .upload-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .upload-card {
            border: 3px dashed #cbd5e1;
            border-radius: 15px;
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            background: #f8fafc;
        }

        .upload-card:hover {
            border-color: #14b8a6;
            background: #f0fdfa;
            transform: translateY(-2px);
        }

        .upload-card.dragover {
            border-color: #0f766e;
            background: #ccfbf1;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 5em;
            margin-bottom: 25px;
        }

        .upload-card h2 {
            color: #0f172a;
            margin-bottom: 15px;
            font-size: 1.8em;
            font-weight: 700;
        }

        .upload-card p {
            color: #64748b;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .upload-btn {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(20, 184, 166, 0.4);
        }

        #fileInput {
            display: none;
        }

        .ai-models-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .model-card {
            background: #f8fafc;
            border-left: 4px solid #14b8a6;
            padding: 20px;
            border-radius: 10px;
        }

        .model-card h4 {
            color: #0f766e;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .model-card p {
            color: #64748b;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .preview-section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .preview-section.active {
            display: block;
        }

        .preview-image {
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            margin: 0 auto 30px;
            display: block;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .processing-steps {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
            display: none;
        }

        .processing-steps.active {
            display: block;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            margin-bottom: 15px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #e2e8f0;
            transition: all 0.5s;
        }

        .step.processing {
            border-left-color: #f59e0b;
            background: #fffbeb;
        }

        .step.completed {
            border-left-color: #10b981;
            background: #d1fae5;
        }

        .step-icon {
            font-size: 2em;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .step-content h4 {
            color: #0f172a;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .step-content p {
            color: #64748b;
            font-size: 0.95em;
        }

        .step-loader {
            width: 24px;
            height: 24px;
            border: 3px solid #f3f4f6;
            border-top: 3px solid #14b8a6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }

        .step.processing .step-loader {
            display: block;
        }

        .results-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .result-card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            animation: slideUp 0.5s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-card h3 {
            color: #0f172a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4em;
            font-weight: 700;
        }

        .result-card .icon {
            font-size: 1.6em;
        }

        .confidence-score {
            background: #f0fdfa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #14b8a6;
        }

        .confidence-score strong {
            color: #0f766e;
            font-size: 1.1em;
        }

        .freshness-indicator {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .freshness-bar {
            flex: 1;
            height: 24px;
            background: #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
        }

        .freshness-fill {
            height: 100%;
            transition: width 1.5s ease;
            border-radius: 12px;
        }

        .fresh { background: linear-gradient(90deg, #10b981 0%, #34d399 100%); }
        .moderate { background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%); }
        .poor { background: linear-gradient(90deg, #ef4444 0%, #f87171 100%); }

        .nutrition-table {
            width: 100%;
            margin-top: 20px;
        }

        .nutrition-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 1.05em;
        }

        .nutrition-row:last-child {
            border-bottom: none;
        }

        .shelf-life-timeline {
            margin-top: 20px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            font-size: 1.05em;
        }

        .timeline-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #14b8a6;
            flex-shrink: 0;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 60px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .spinner {
            border: 5px solid #f1f5f9;
            border-top: 5px solid #14b8a6;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 25px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tag {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px 5px 5px 0;
            font-weight: 600;
        }

        .tag-primary { background: #ccfbf1; color: #0f766e; }
        .tag-success { background: #d1fae5; color: #065f46; }
        .tag-warning { background: #fef3c7; color: #92400e; }
        .tag-danger { background: #fee2e2; color: #991b1b; }

        .llm-badge {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        /* Chat Assistant */
        .chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            border: none;
            font-size: 2em;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
            transition: all 0.3s;
            z-index: 1000;
            display: none;
        }

        .chat-button.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(20, 184, 166, 0.5);
        }

        .chat-window {
            position: fixed;
            bottom: 110px;
            right: 30px;
            width: 400px;
            height: 550px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            padding: 25px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-size: 1.3em;
            font-weight: 700;
        }

        .chat-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .chat-close:hover {
            background: rgba(255,255,255,0.3);
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: #f8fafc;
        }

        .chat-message {
            margin-bottom: 18px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.bot {
            text-align: left;
        }

        .chat-message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            padding: 14px 20px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
            font-size: 0.98em;
            line-height: 1.5;
        }

        .chat-message.bot .message-bubble {
            background: white;
            color: #334155;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .chat-message.user .message-bubble {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
        }

        .chat-input-area {
            padding: 20px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 12px;
            background: white;
            border-radius: 0 0 20px 20px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: #14b8a6;
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
        }

        .chat-send {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .chat-send:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
        }

        @media (max-width: 968px) {
            .login-container {
                grid-template-columns: 1fr;
            }
            
            .login-left {
                display: none;
            }

            .navbar {
                padding: 15px 20px;
            }

            .navbar-brand .brand-text h1 {
                font-size: 1.2em;
            }

            .main-content {
                padding: 20px;
            }

            .food-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }

            .upload-card {
                padding: 40px 20px;
            }

            .results-section {
                grid-template-columns: 1fr;
            }

            .ai-models-info {
                grid-template-columns: 1fr;
            }

            .chat-window {
                width: calc(100% - 40px);
                right: 20px;
                bottom: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-page">
            <div class="login-container">
                <div class="login-left">
                    <h1>üîç FreshScan</h1>
                    <p class="subtitle">Advanced LLM-powered food analysis system using Gemini AI and deep learning models for intelligent freshness detection and nutritional insights.</p>
                    
                    <ul class="feature-list">
                        <li>Gemini LLM Vision Analysis</li>
                        <li>Real-time AI freshness scoring</li>
                        <li>Intelligent food classification</li>
                        <li>Smart nutritional recommendations</li>
                        <li>24/7 AI assistant support</li>
                    </ul>
                </div>
                <div class="login-right">
                    <div class="login-header">
                        <h2>Welcome Back</h2>
                        <p>Sign in to your account</p>
                    </div>
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" id="loginEmail" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="loginPassword" placeholder="Enter your password" required>
                        </div>
                        <button type="submit" class="btn">Sign In</button>
                    </form>
                    <div class="auth-footer">
                        Don't have an account? <a onclick="showPage('register')">Sign Up</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page">
        <div class="login-page">
            <div class="register-container">
                <div class="login-header">
                    <h2>Create Account</h2>
                    <p>Join FreshScan today</p>
                </div>
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="regName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="regEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPassword" placeholder="Create a password (min 6 characters)" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" id="regConfirmPassword" placeholder="Confirm your password" required>
                    </div>
                    <button type="submit" class="btn">Create Account</button>
                </form>
                <div class="auth-footer">
                    Already have an account? <a onclick="showPage('login')">Sign In</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="page">
        <div class="main-app">
            <nav class="navbar">
                <div class="navbar-brand">
                    <span class="logo">üîç</span>
                    <div class="brand-text">
                        <h1>FreshScan</h1>
                        <p>Gemini LLM Powered</p>
                    </div>
                </div>
                <div class="navbar-right">
                    <div class="mode-toggle">
                        <button class="mode-btn active" onclick="switchMode('quick')">Quick Scan</button>
                        <button class="mode-btn" onclick="switchMode('advanced')">LLM Upload</button>
                    </div>
                    <div class="user-badge">
                        <span>üë§</span>
                        <span id="userName">User</span>
                    </div>
                    <button class="btn btn-small btn-secondary" onclick="handleLogout()">Logout</button>
                </div>
            </nav>

            <div class="main-content">
                <div class="content-header">
                    <h1>AI Food Analysis Dashboard</h1>
                    <p id="modeDescription">Select a food item for instant analysis</p>
                </div>

                <!-- Quick Scan Mode -->
                <div id="quickMode" class="mode-section active">
                    <div class="food-selector">
                        <h2>Quick Scan - Pre-trained Models</h2>
                        <div class="food-grid">
                            <div class="food-item" onclick="selectFood('salad')">
                                <div class="emoji">ü•ó</div>
                                <div class="name">Salad</div>
                                <div class="type">Healthy</div>
                            </div>
                            <div class="food-item" onclick="selectFood('apple')">
                                <div class="emoji">üçé</div>
                                <div class="name">Apple</div>
                                <div class="type">Healthy</div>
                            </div>
                            <div class="food-item" onclick="selectFood('banana')">
                                <div class="emoji">üçå</div>
                                <div class="name">Banana</div>
                                <div class="type">Healthy</div>
                            </div>
                            <div class="food-item" onclick="selectFood('broccoli')">
                                <div class="emoji">ü•¶</div>
                                <div class="name">Broccoli</div>
                                <div class="type">Healthy</div>
                            </div>
                            <div class="food-item" onclick="selectFood('carrot')">
                                <div class="emoji">ü•ï</div>
                                <div class="name">Carrot</div>
                                <div class="type">Healthy</div>
                            </div>
                            <div class="food-item" onclick="selectFood('pizza')">
                                <div class="emoji">üçï</div>
                                <div class="name">Pizza</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('burger')">
                                <div class="emoji">üçî</div>
                                <div class="name">Burger</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('fries')">
                                <div class="emoji">üçü</div>
                                <div class="name">Fries</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('donut')">
                                <div class="emoji">üç©</div>
                                <div class="name">Donut</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('chips')">
                                <div class="emoji">ü•®</div>
                                <div class="name">Chips</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('candy')">
                                <div class="emoji">üç¨</div>
                                <div class="name">Candy</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('soda')">
                                <div class="emoji">ü•§</div>
                                <div class="name">Soda</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('cake')">
                                <div class="emoji">üç∞</div>
                                <div class="name">Cake</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('cookie')">
                                <div class="emoji">üç™</div>
                                <div class="name">Cookie</div>
                                <div class="type">Junk Food</div>
                            </div>
                            <div class="food-item" onclick="selectFood('icecream')">
                                <div class="emoji">üç¶</div>
                                <div class="name">Ice Cream</div>
                                <div class="type">Junk Food</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced LLM Upload Mode -->
                <div id="advancedMode" class="mode-section">
                    <div class="upload-section">
                        <h2 style="text-align: center; color: #0f172a; margin-bottom: 10px;">Gemini LLM Vision Analysis</h2>
                        <div class="llm-badge" style="display: flex; justify-content: center; margin-bottom: 30px;">
                            <span>ü§ñ Powered by Google Gemini AI</span>
                        </div>
                        
                        <div class="upload-card" id="uploadCard" onclick="document.getElementById('fileInput').click()">
                            <div class="upload-icon">üì∏</div>
                            <h2>Upload Your Food Picture Here</h2>
                            <p>LLM will analyze your food image intelligently</p>
                            <input type="file" id="fileInput" accept="image/*">
                            <button class="upload-btn" type="button">
                                üìÅ Browse Files
                            </button>
                        </div>

                        <div class="ai-models-info">
                            <div class="model-card">
                                <h4>üß† Gemini Vision LLM</h4>
                                <p>Advanced multimodal AI that understands images and provides intelligent food analysis with natural language reasoning</p>
                            </div>
                            <div class="model-card">
                                <h4>üî¨ Smart Freshness Scoring</h4>
                                <p>LLM-powered analysis that evaluates food quality, freshness, and health impact with contextual understanding</p>
                            </div>
                            <div class="model-card">
                                <h4>üìä Intelligent Nutrition</h4>
                                <p>AI-driven nutritional breakdown with personalized health recommendations based on food type and quality</p>
                            </div>
                            <div class="model-card">
                                <h4>‚è∞ Predictive Insights</h4>
                                <p>Machine learning algorithms predict shelf life and provide storage recommendations using historical data</p>
                            </div>
                        </div>
                    </div>

                    <div class="preview-section" id="previewSection">
                        <h3 style="text-align: center; color: #0f172a; margin-bottom: 20px;">Image Preview</h3>
                        <img id="previewImage" class="preview-image" alt="Food preview">
                        <div class="action-buttons">
                            <button class="btn" onclick="analyzeUploadedImage()">ü§ñ Run LLM Analysis</button>
                            <button class="btn btn-secondary" onclick="resetUpload()">üîÑ Upload New Image</button>
                        </div>
                    </div>

                    <div class="processing-steps" id="processingSteps">
                        <h3 style="color: #0f172a; margin-bottom: 25px; text-align: center;">Gemini LLM Processing Pipeline</h3>
                        
                        <div class="step" id="step1">
                            <div class="step-icon">üì•</div>
                            <div class="step-content">
                                <h4>Image Preprocessing</h4>
                                <p>Optimizing image for LLM vision analysis</p>
                            </div>
                            <div class="step-loader"></div>
                        </div>

                        <div class="step" id="step2">
                            <div class="step-icon">ü§ñ</div>
                            <div class="step-content">
                                <h4>Gemini Vision Analysis</h4>
                                <p>LLM analyzing food content and quality</p>
                            </div>
                            <div class="step-loader"></div>
                        </div>

                        <div class="step" id="step3">
                            <div class="step-icon">üîç</div>
                            <div class="step-content">
                                <h4>Intelligent Classification</h4>
                                <p>AI determining food type and health category</p>
                            </div>
                            <div class="step-loader"></div>
                        </div>

                        <div class="step" id="step4">
                            <div class="step-icon">üìä</div>
                            <div class="step-content">
                                <h4>Nutritional Intelligence</h4>
                                <p>LLM generating personalized insights</p>
                            </div>
                            <div class="step-loader"></div>
                        </div>

                        <div class="step" id="step5">
                            <div class="step-icon">‚úÖ</div>
                            <div class="step-content">
                                <h4>Analysis Complete</h4>
                                <p>Generating comprehensive AI report</p>
                            </div>
                            <div class="step-loader"></div>
                        </div>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <h3 style="color: #0f766e; margin-bottom: 10px;">Running LLM Analysis...</h3>
                    <p style="color: #64748b;">Gemini AI is processing your food</p>
                </div>

                <div id="results"></div>
            </div>
        </div>
    </div>

    <!-- Chat Assistant -->
    <button class="chat-button" id="chatButton" onclick="toggleChat()">üí¨</button>
    
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h3>ü§ñ Gemini Assistant</h3>
            <button class="chat-close" onclick="toggleChat()">√ó</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot">
                <div class="message-bubble">
                    Hi! I'm your Gemini-powered Food Assistant. Ask me about food analysis, nutrition, storage, or our LLM technology! üçé
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="handleChatKeyPress(event)">
            <button class="chat-send" onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        let currentUser = null;
        let selectedFood = null;
        let currentMode = 'quick';
        let uploadedImage = null;

        // Enhanced food database with proper scoring
        // HEALTHY FOODS: High scores (85-95%) = GREEN
        // JUNK FOODS: Low scores (25-50%) = RED/YELLOW
        const foodDatabase = {
            // HEALTHY FOODS - HIGH SCORES (85-95%)
            'salad': { 
                category: 'Vegetables', 
                freshness: 92,  // HIGH = GREEN
                calories: 150, 
                protein: '5g', 
                carbs: '20g', 
                fat: '8g', 
                fiber: '6g', 
                shelfLife: '3-5 days', 
                type: 'healthy', 
                confidence: 94.2 
            },
            'apple': { 
                category: 'Fruits', 
                freshness: 95,  // HIGH = GREEN
                calories: 95, 
                protein: '0.5g', 
                carbs: '25g', 
                fat: '0.3g', 
                fiber: '4g', 
                shelfLife: '1-2 weeks', 
                type: 'healthy', 
                confidence: 96.8 
            },
            'banana': { 
                category: 'Fruits', 
                freshness: 90,  // HIGH = GREEN
                calories: 105, 
                protein: '1.3g', 
                carbs: '27g', 
                fat: '0.4g', 
                fiber: '3g', 
                shelfLife: '5-7 days', 
                type: 'healthy', 
                confidence: 95.3 
            },
            'broccoli': { 
                category: 'Vegetables', 
                freshness: 89,  // HIGH = GREEN
                calories: 55, 
                protein: '4g', 
                carbs: '11g', 
                fat: '0.6g', 
                fiber: '5g', 
                shelfLife: '7-10 days', 
                type: 'healthy', 
                confidence: 93.7 
            },
            'carrot': { 
                category: 'Vegetables', 
                freshness: 93,  // HIGH = GREEN
                calories: 41, 
                protein: '0.9g', 
                carbs: '10g', 
                fat: '0.2g', 
                fiber: '3g', 
                shelfLife: '2-3 weeks', 
                type: 'healthy', 
                confidence: 97.1 
            },
            
            // JUNK FOODS - LOW SCORES (25-50%) = RED/YELLOW
            'pizza': { 
                category: 'Fast Food', 
                freshness: 35,  // LOW = RED
                calories: 285, 
                protein: '12g', 
                carbs: '36g', 
                fat: '10g', 
                fiber: '2g', 
                shelfLife: '3-4 days', 
                type: 'junk', 
                confidence: 91.5 
            },
            'burger': { 
                category: 'Fast Food', 
                freshness: 28,  // LOW = RED
                calories: 540, 
                protein: '25g', 
                carbs: '45g', 
                fat: '25g', 
                fiber: '3g', 
                shelfLife: '1-2 days', 
                type: 'junk', 
                confidence: 89.3 
            },
            'fries': { 
                category: 'Fast Food', 
                freshness: 25,  // LOW = RED
                calories: 365, 
                protein: '4g', 
                carbs: '48g', 
                fat: '17g', 
                fiber: '4g', 
                shelfLife: '1 day', 
                type: 'junk', 
                confidence: 92.8 
            },
            'donut': { 
                category: 'Desserts', 
                freshness: 32,  // LOW = RED
                calories: 452, 
                protein: '5g', 
                carbs: '51g', 
                fat: '25g', 
                fiber: '1g', 
                shelfLife: '2-3 days', 
                type: 'junk', 
                confidence: 94.1 
            },
            'chips': { 
                category: 'Snacks', 
                freshness: 40,  // LOW = RED
                calories: 536, 
                protein: '7g', 
                carbs: '53g', 
                fat: '34g', 
                fiber: '4g', 
                shelfLife: '2-3 months', 
                type: 'junk', 
                confidence: 96.2 
            },
            'candy': { 
                category: 'Sweets', 
                freshness: 30,  // LOW = RED
                calories: 394, 
                protein: '0g', 
                carbs: '100g', 
                fat: '0g', 
                fiber: '0g', 
                shelfLife: '6-12 months', 
                type: 'junk', 
                confidence: 98.5 
            },
            'soda': { 
                category: 'Beverages', 
                freshness: 22,  // VERY LOW = RED
                calories: 140, 
                protein: '0g', 
                carbs: '39g', 
                fat: '0g', 
                fiber: '0g', 
                shelfLife: '6-9 months', 
                type: 'junk', 
                confidence: 99.1 
            },
            'cake': { 
                category: 'Desserts', 
                freshness: 38,  // LOW = RED
                calories: 367, 
                protein: '4g', 
                carbs: '58g', 
                fat: '14g', 
                fiber: '1g', 
                shelfLife: '3-5 days', 
                type: 'junk', 
                confidence: 93.4 
            },
            'cookie': { 
                category: 'Desserts', 
                freshness: 42,  // LOW = RED
                calories: 502, 
                protein: '6g', 
                carbs: '64g', 
                fat: '25g', 
                fiber: '2g', 
                shelfLife: '2-3 weeks', 
                type: 'junk', 
                confidence: 95.7 
            },
            'icecream': { 
                category: 'Desserts', 
                freshness: 33,  // LOW = RED
                calories: 207, 
                protein: '4g', 
                carbs: '24g', 
                fat: '11g', 
                fiber: '1g', 
                shelfLife: '2-4 months', 
                type: 'junk', 
                confidence: 97.3 
            }
        };

        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            
            if (page === 'login') {
                document.getElementById('loginPage').classList.add('active');
                document.getElementById('chatButton').classList.remove('show');
            } else if (page === 'register') {
                document.getElementById('registerPage').classList.add('active');
                document.getElementById('chatButton').classList.remove('show');
            } else if (page === 'main') {
                document.getElementById('mainApp').classList.add('active');
                document.getElementById('chatButton').classList.add('show');
            }
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            const storedUser = JSON.parse(localStorage.getItem('freshscan_user') || '{}');
            
            if (storedUser.email && storedUser.email === email && storedUser.password === password) {
                currentUser = storedUser;
                document.getElementById('userName').textContent = currentUser.name;
                showPage('main');
            } else {
                alert('Invalid credentials! Please check your email and password or create a new account.');
            }
        }

        function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }

            if (password.length < 6) {
                alert('Password must be at least 6 characters long.');
                return;
            }

            localStorage.setItem('freshscan_user', JSON.stringify({ name, email, password }));
            
            alert('Account created successfully! Please login with your credentials.');
            
            document.getElementById('regName').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regConfirmPassword').value = '';
            
            showPage('login');
        }

        function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                document.getElementById('results').innerHTML = '';
                showPage('login');
            }
        }

        function switchMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.mode-section').forEach(section => {
                section.classList.remove('active');
            });
            
            if (mode === 'quick') {
                document.getElementById('quickMode').classList.add('active');
                document.getElementById('modeDescription').textContent = 'Select a food item for instant analysis';
            } else {
                document.getElementById('advancedMode').classList.add('active');
                document.getElementById('modeDescription').textContent = 'Upload your food image for LLM-powered analysis';
            }
            
            document.getElementById('results').innerHTML = '';
        }

        function selectFood(foodType) {
            document.querySelectorAll('.food-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            event.currentTarget.classList.add('selected');
            
            selectedFood = foodType;
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').innerHTML = '';
            
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                displayResults(foodType);
            }, 2000);
        }

        // Upload functionality
        const fileInput = document.getElementById('fileInput');
        const uploadCard = document.getElementById('uploadCard');
        const previewSection = document.getElementById('previewSection');
        const previewImage = document.getElementById('previewImage');

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadCard.addEventListener(eventName, preventDefaults, false);
            document.body.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            uploadCard.addEventListener(eventName, () => {
                uploadCard.classList.add('dragover');
            }, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadCard.addEventListener(eventName, () => {
                uploadCard.classList.remove('dragover');
            }, false);
        });

        uploadCard.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length > 0) {
                handleImageUpload(files[0]);
            }
        }, false);

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleImageUpload(file);
            }
        });

        function handleImageUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please upload an image file!');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                uploadedImage = e.target.result;
                previewImage.src = uploadedImage;
                uploadCard.style.display = 'none';
                previewSection.classList.add('active');
                document.getElementById('results').innerHTML = '';
                document.getElementById('processingSteps').classList.remove('active');
            };
            reader.readAsDataURL(file);
        }

        function resetUpload() {
            uploadCard.style.display = 'block';
            previewSection.classList.remove('active');
            document.getElementById('results').innerHTML = '';
            document.getElementById('processingSteps').classList.remove('active');
            fileInput.value = '';
            uploadedImage = null;
        }

        function analyzeUploadedImage() {
            previewSection.classList.remove('active');
            document.getElementById('processingSteps').classList.add('active');
            document.getElementById('results').innerHTML = '';
            
            const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
            let currentStep = 0;
            
            function processStep() {
                if (currentStep > 0) {
                    document.getElementById(steps[currentStep - 1]).classList.remove('processing');
                    document.getElementById(steps[currentStep - 1]).classList.add('completed');
                }
                
                if (currentStep < steps.length) {
                    document.getElementById(steps[currentStep]).classList.add('processing');
                    currentStep++;
                    setTimeout(processStep, 1200);
                } else {
                    setTimeout(() => {
                        document.getElementById('processingSteps').classList.remove('active');
                        previewSection.classList.add('active');
                        
                        steps.forEach(step => {
                            document.getElementById(step).classList.remove('processing', 'completed');
                        });
                        
                        // Simulate LLM detection
                        const foods = Object.keys(foodDatabase);
                        const randomFood = foods[Math.floor(Math.random() * foods.length)];
                        displayResults(randomFood);
                    }, 500);
                }
            }
            
            processStep();
        }

        function displayResults(foodType) {
            const foodData = foodDatabase[foodType];
            const foodName = foodType.charAt(0).toUpperCase() + foodType.slice(1);
            const isHealthy = foodData.type === 'healthy';
            
            // PROPER COLOR CODING:
            // Healthy foods (85-95%) = GREEN
            // Junk foods (22-42%) = RED
            let freshnessColor = 'poor';  // RED
            let freshnessStatus = 'Poor Quality - Unhealthy';
            
            if (foodData.freshness >= 75) {
                freshnessColor = 'fresh';  // GREEN
                freshnessStatus = 'Excellent Quality - Very Healthy';
            } else if (foodData.freshness >= 55) {
                freshnessColor = 'moderate';  // YELLOW
                freshnessStatus = 'Moderate Quality';
            }
            
            const healthWarning = !isHealthy ? `
                <div style="background: #fee2e2; padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #dc2626;">
                    <strong style="color: #991b1b;">üö´ DANGER - Unhealthy Food Detected!</strong>
                    <p style="color: #991b1b; margin-top: 5px; font-size: 0.95em;">This is highly processed junk food. Very high in calories, unhealthy fats, sugar, and artificial additives. Low nutritional value. Regular consumption significantly increases health risks including obesity, diabetes, and heart disease. <strong>Avoid or limit consumption!</strong></p>
                </div>
            ` : `
                <div style="background: #d1fae5; padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #10b981;">
                    <strong style="color: #065f46;">‚úÖ HEALTHY FOOD - Excellent Choice!</strong>
                    <p style="color: #065f46; margin-top: 5px; font-size: 0.95em;">This is a natural, nutrient-dense food. Rich in vitamins, minerals, fiber, and antioxidants. Low in unhealthy fats and processed ingredients. <strong>Highly recommended for regular consumption!</strong></p>
                </div>
            `;

            const resultsHTML = `
                <div class="results-section">
                    <div class="result-card">
                        <h3><span class="icon">üçΩÔ∏è</span> LLM Food Classification</h3>
                        <div class="llm-badge">
                            ü§ñ Gemini Vision Analysis
                        </div>
                        <div class="confidence-score">
                            <strong>AI Confidence: ${foodData.confidence}%</strong>
                            <p style="color: #64748b; font-size: 0.9em; margin-top: 5px;">Gemini multimodal LLM with vision capabilities</p>
                        </div>
                        <h4 style="color: ${isHealthy ? '#10b981' : '#dc2626'}; margin: 15px 0; font-size: 1.6em; font-weight: 800;">${foodName}</h4>
                        <p>
                            <span class="tag tag-primary">${foodData.category}</span>
                            <span class="tag ${isHealthy ? 'tag-success' : 'tag-danger'}" style="font-size: 1em; padding: 8px 18px;">
                                ${isHealthy ? '‚úÖ HEALTHY FOOD' : 'üö´ JUNK FOOD'}
                            </span>
                        </p>
                        ${healthWarning}
                    </div>

                    <div class="result-card">
                        <h3><span class="icon">${isHealthy ? 'üåø' : '‚ö†Ô∏è'}</span> Health Quality Score</h3>
                        <div class="confidence-score">
                            <strong>LLM Health Analysis</strong>
                            <p style="color: #64748b; font-size: 0.9em; margin-top: 5px;">AI-powered quality assessment</p>
                        </div>
                        <div class="freshness-indicator">
                            <div class="freshness-bar">
                                <div class="freshness-fill ${freshnessColor}" 
                                     style="width: ${foodData.freshness}%"></div>
                            </div>
                            <strong style="color: ${freshnessColor === 'fresh' ? '#10b981' : freshnessColor === 'moderate' ? '#f59e0b' : '#dc2626'}; font-size: 1.4em; font-weight: 800;">${foodData.freshness}%</strong>
                        </div>
                        <p style="margin-top: 15px;">
                            <span class="tag ${freshnessColor === 'fresh' ? 'tag-success' : freshnessColor === 'moderate' ? 'tag-warning' : 'tag-danger'}" style="font-size: 1em; padding: 8px 18px;">
                                ${freshnessStatus}
                            </span>
                        </p>
                        <p style="margin-top: 15px; color: #64748b; line-height: 1.6; font-size: 1.05em;">
                            ${isHealthy ? 
                                '<strong style="color: #10b981;">‚úÖ Natural, whole food</strong> with high nutritional density. Rich in essential vitamins, minerals, antioxidants, and dietary fiber. Minimal processing. <strong>Excellent for daily consumption.</strong>' : 
                                '<strong style="color: #dc2626;">üö´ Highly processed</strong> with artificial additives, preservatives, and unhealthy ingredients. High in empty calories, trans fats, and refined sugars. <strong>Not recommended for regular consumption.</strong>'}
                        </p>
                    </div>

                    <div class="result-card">
                        <h3><span class="icon">üìä</span> Nutritional Analysis</h3>
                        <div class="confidence-score">
                            <strong>LLM Nutritional Intelligence</strong>
                            <p style="color: #64748b; font-size: 0.9em; margin-top: 5px;">AI-powered nutritional breakdown</p>
                        </div>
                        <div class="nutrition-table">
                            <div class="nutrition-row">
                                <span><strong>Calories</strong></span>
                                <span style="color: ${foodData.calories > 300 ? '#dc2626' : '#10b981'}; font-weight: 700; font-size: 1.1em;">
                                    ${foodData.calories} kcal ${foodData.calories > 300 ? '‚ö†Ô∏è HIGH' : '‚úÖ GOOD'}
                                </span>
                            </div>
                            <div class="nutrition-row">
                                <span>Protein</span>
                                <span style="font-weight: 600;">${foodData.protein}</span>
                            </div>
                            <div class="nutrition-row">
                                <span>Carbohydrates</span>
                                <span style="font-weight: 600;">${foodData.carbs}</span>
                            </div>
                            <div class="nutrition-row">
                                <span>Total Fat</span>
                                <span style="color: ${parseInt(foodData.fat) > 15 ? '#dc2626' : '#10b981'}; font-weight: 700;">
                                    ${foodData.fat} ${parseInt(foodData.fat) > 15 ? '‚ö†Ô∏è HIGH' : '‚úÖ GOOD'}
                                </span>
                            </div>
                            <div class="nutrition-row">
                                <span>Dietary Fiber</span>
                                <span style="font-weight: 600;">${foodData.fiber}</span>
                            </div>
                        </div>
                        ${!isHealthy ? `
                            <div style="margin-top: 15px; padding: 15px; background: #fee2e2; border-radius: 8px; border-left: 3px solid #dc2626;">
                                <p style="color: #991b1b; font-size: 1em; font-weight: 700; margin-bottom: 8px;">
                                    üö´ CRITICAL HEALTH CONCERNS:
                                </p>
                                <ul style="color: #991b1b; font-size: 0.95em; padding-left: 20px; line-height: 1.8;">
                                    <li><strong>Very high in empty calories</strong></li>
                                    <li><strong>Excessive unhealthy fats & trans fats</strong></li>
                                    <li><strong>High sugar content</strong></li>
                                    <li><strong>Low in essential vitamins & minerals</strong></li>
                                    <li><strong>Contains artificial additives & preservatives</strong></li>
                                </ul>
                            </div>
                        ` : `
                            <div style="margin-top: 15px; padding: 15px; background: #d1fae5; border-radius: 8px; border-left: 3px solid #10b981;">
                                <p style="color: #065f46; font-size: 1em; font-weight: 700;">
                                    ‚úÖ EXCELLENT NUTRITIONAL PROFILE
                                </p>
                                <p style="color: #065f46; margin-top: 8px; font-size: 0.95em;">
                                    Rich in vitamins, minerals, antioxidants, and dietary fiber. Low in unhealthy fats and processed ingredients. <strong>Perfect for a healthy diet!</strong>
                                </p>
                            </div>
                        `}
                    </div>

                    <div class="result-card">
                        <h3><span class="icon">‚è∞</span> Storage & Recommendations</h3>
                        <div class="confidence-score">
                            <strong>AI Predictive Analysis</strong>
                            <p style="color: #64748b; font-size: 0.9em; margin-top: 5px;">Machine learning shelf life prediction</p>
                        </div>
                        <div class="shelf-life-timeline">
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: ${isHealthy ? '#10b981' : '#dc2626'};"></div>
                                <div>
                                    <strong style="color: #0f172a;">Shelf Life:</strong><br>
                                    <span style="color: #64748b;">${foodData.shelfLife}</span>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #0f766e;"></div>
                                <div>
                                    <strong style="color: #0f172a;">Storage Method:</strong><br>
                                    <span style="color: #64748b;">${isHealthy ? 'Refrigerate at 2-4¬∞C in airtight container' : 'Store in cool, dry place away from sunlight'}</span>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <strong style="color: #0f172a; font-size: 1.1em;">${isHealthy ? '‚úÖ Consumption Recommendations:' : '‚ö†Ô∏è Health Warnings:'}</strong>
                            <ul style="margin-top: 12px; padding-left: 20px; color: #64748b; line-height: 2;">
                                ${isHealthy ? `
                                    <li style="color: #10b981; font-weight: 600;">‚úÖ Excellent for daily consumption</li>
                                    <li>Keep refrigerated at 2-4¬∞C</li>
                                    <li>Store in airtight container</li>
                                    <li>Consume within recommended time</li>
                                    <li>Check for signs of spoilage daily</li>
                                ` : `
                                    <li style="color: #dc2626; font-weight: 700;">üö´ LIMIT OR AVOID consumption</li>
                                    <li style="color: #dc2626; font-weight: 700;">üö´ NOT suitable for regular diet</li>
                                    <li style="color: #dc2626; font-weight: 700;">üö´ High health risk with frequent consumption</li>
                                    <li style="color: #f59e0b;">‚ö†Ô∏è Choose healthier alternatives</li>
                                    <li>If consumed, balance with nutritious foods</li>
                                `}
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function toggleChat() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.classList.toggle('active');
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                setTimeout(() => {
                    const response = getBotResponse(message);
                    addMessage(response, 'bot');
                }, 600);
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, sender) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('llm') || lowerMessage.includes('gemini') || lowerMessage.includes('ai')) {
                return 'FreshScan uses Google Gemini LLM with vision capabilities for intelligent food analysis. Our multimodal AI understands images and provides contextual insights about food quality, nutrition, and health impact with natural language reasoning! ü§ñ';
            } else if (lowerMessage.includes('healthy') || lowerMessage.includes('nutrition')) {
                return 'Healthy foods score 85-95% (GREEN) and are rich in nutrients. Junk foods score 22-42% (RED) and should be avoided. Our LLM analyzes nutritional content and provides personalized recommendations! üåø';
            } else if (lowerMessage.includes('junk') || lowerMessage.includes('unhealthy')) {
                return 'Junk foods are highly processed with artificial additives, high calories, unhealthy fats, and low nutritional value. Our AI gives them RED ratings (22-42%) and warns about health risks. Choose healthier alternatives! üö´';
            } else if (lowerMessage.includes('score') || lowerMessage.includes('rating')) {
                return 'Our LLM scoring system: 85-95% = GREEN (Healthy), 55-74% = YELLOW (Moderate), 22-42% = RED (Unhealthy/Junk). The AI analyzes food quality, processing level, and nutritional value! üìä';
            } else {
                return 'I can help you with: LLM technology, food scoring system, healthy vs junk food analysis, nutritional insights, and storage recommendations. What would you like to know? üòä';
            }
        }

        // Initialize
        showPage('login');
    </script>
</body>
</html>